<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tympanus</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Darker+Grotesque&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/main.css" />
  </head>

  <body class="body">


    <div class="wrapper-sticky">
      <div class="container-link-animaciones">
        <div class="texto">
          <span>ANIMATIONS: </span>
        </div>
        <div class="numero ">
          <a href="/SATO/index.html">1</a>
        </div>
        <div class="numero ">
          <a href="/Tedy/index.html">2</a>
        </div>
        <div class="numero ">
          <a href="/EntranceAnimations/index.html">3</a>
        </div>
        <div class="numero ">
          <a href="/StudioGrafixo/index.html">4</a>
        </div>
        <div class="numero numero--selected">
          <a href="/Tympanus/index.html">5</a>
        </div>
        <div class="numero">
          <a href="/ScrollWeb/index.html">6</a>
        </div>
        <div class="numero">
          <a href="/Falconcept/index.html">7</a>
        </div>
        <div class="numero">
          <a href="/Milk/index.html">8</a>
        </div>
        <div class="numero">
          <a href="/100years/index.html">9</a>
        </div>
      </div>

    </div>

    <div class="contenedor-general">
      <div class="navbar">
        <div class="titulo-final">
          <a href=""
            >THE EASIEST WAY TO ANIMATE LOTTIE IS LIVE: COMPLETELY FREE
            UNLIMITED EXPORTS WITH SVGATOR.</a
          >
        </div>
        <div class="titulo-centro">
          <p>PREVIOUS DEM</p>
        </div>
        <div class="titulo">
          <p>IMAGE TO CONTENT PAGE TRANSITIO</p>
          <a
            aria-label="Back to the article"
            class="frame__title-back"
            href="https://tympanus.net/codrops/2022/08/03/large-image-to-content-page-transition/"
          >
            <span class="oh__inner"></span>
            <svg
              width="18px"
              fill="currentColor"
              height="18px"
              viewBox="0 0 24 24"
            >
              <path
                vector-effect="non-scaling-stroke"
                d="M18.25 15.5a.75.75 0 00.75-.75v-9a.75.75 0 00-.75-.75h-9a.75.75 0 000 1.5h7.19L6.22 16.72a.75.75 0 101.06 1.06L17.5 7.56v7.19c0 .414.336.75.75.75z"
              ></path>
            </svg>
          </a>
        </div>
      </div>

      <div class="contenedor-escenas">
        <div class="elemento-parallax">
          <div class="columna-1">
            <div class="regresar">
              <svg
                fill="#ffffff"
                version="1.1"
                viewBox="144 144 512 512"
                xmlns="http://www.w3.org/2000/svg"
                stroke="#ffffff"
              >
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g
                  id="SVGRepo_tracerCarrier"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    d="m310.1 521.39c2.9531 2.9805 6.9805 4.6562 11.176 4.6562 4.1992 0 8.2227-1.6758 11.18-4.6562 2.9805-2.957 4.6562-6.9805 4.6562-11.18s-1.6758-8.2227-4.6562-11.18l-83.445-83.285h339.91c5.625 0 10.824-3 13.637-7.8711s2.8125-10.875 0-15.746-8.0117-7.8711-13.637-7.8711h-339.91l83.445-83.285c3.9922-3.9922 5.5547-9.8164 4.0898-15.27-1.4609-5.457-5.7227-9.7188-11.176-11.18-5.457-1.4609-11.277 0.097657-15.27 4.0938l-110.21 110.21h-0.003906c-2.9805 2.957-4.6562 6.9805-4.6562 11.18 0 4.1953 1.6758 8.2188 4.6562 11.176z"
                  ></path>
                </g>
              </svg>
              <p>GO BACK</p>
            </div>
            <div data-speed="200" class="background background-1 parallax">
              <div data-speed="20" class="texto parallax">
                <div class="texto-grande">
                  <p>Andesite</p>
                  <p class="bold">aphanitic</p>
                </div>
                <div class="texto-pequeno">
                  <p>A VOLCANIC ROCK OF INTERMEDIATE</p>
                  <p>COMPOSITION, BETWEEN SILICA-POOR</p>
                  <p>BASALT AND SILICA-RICH-RHYOLITE</p>
                </div>
              </div>
            </div>
            <div class="contenedor-escenas-small">
              <div class="background-1 elemento-1"></div>
              <div class="background-1 elemento elemento-2"></div>
              <div class="background-1 elemento elemento-3"></div>
              <div class="background-1 elemento elemento-4"></div>
            </div>
          </div>
          <div class="columna-2">
            <div class="contenedor-texto-principal">
              <span class="contenedor">
                <p class="titulo-2">Andesite</p>
              </span>
            </div>
            <div class="contenedor-texto-principal">
              <span class="contenedor">
                <p class="titulo-2 bold">aphanitic</p>
              </span>
            </div>
            <div class="contenedor-autor">
              <div class="contenedor">
                <p class="titulo-2--secundario">By James Maurice Rojo</p>
              </div>
            </div>
            <div class="contenedor-undefined">
              <div class="contenedor">
                <p class="titulo-2">undefined</p>
              </div>
            </div>
          </div>
        </div>
        <div class="elemento-parallax">
          <div class="columna-1">
            <div class="regresar">
              <svg
                fill="#ffffff"
                version="1.1"
                viewBox="144 144 512 512"
                xmlns="http://www.w3.org/2000/svg"
                stroke="#ffffff"
              >
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g
                  id="SVGRepo_tracerCarrier"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    d="m310.1 521.39c2.9531 2.9805 6.9805 4.6562 11.176 4.6562 4.1992 0 8.2227-1.6758 11.18-4.6562 2.9805-2.957 4.6562-6.9805 4.6562-11.18s-1.6758-8.2227-4.6562-11.18l-83.445-83.285h339.91c5.625 0 10.824-3 13.637-7.8711s2.8125-10.875 0-15.746-8.0117-7.8711-13.637-7.8711h-339.91l83.445-83.285c3.9922-3.9922 5.5547-9.8164 4.0898-15.27-1.4609-5.457-5.7227-9.7188-11.176-11.18-5.457-1.4609-11.277 0.097657-15.27 4.0938l-110.21 110.21h-0.003906c-2.9805 2.957-4.6562 6.9805-4.6562 11.18 0 4.1953 1.6758 8.2188 4.6562 11.176z"
                  ></path>
                </g>
              </svg>
              <p>GO BACK</p>
            </div>
            <div data-speed="200" class="background background-2 parallax">
              <div data-speed="20" class="texto parallax">
                <div class="texto-grande">
                  <p>Andesite</p>
                  <p class="bold">aphanitic</p>
                </div>
                <div class="texto-pequeno">
                  <p>A VOLCANIC ROCK OF INTERMEDIATE</p>
                  <p>COMPOSITION, BETWEEN SILICA-POOR</p>
                  <p>BASALT AND SILICA-RICH-RHYOLITE</p>
                </div>
              </div>
            </div>
            <div class="contenedor-escenas-small">
              <div class="background-2 elemento-1"></div>
              <div class="background-2 elemento elemento-2"></div>
              <div class="background-2 elemento elemento-3"></div>
              <div class="background-2 elemento elemento-4"></div>
            </div>
          </div>
          <div class="columna-2">
            <div class="contenedor-texto-principal">
              <span class="contenedor">
                <p class="titulo-2">Andesite</p>
              </span>
            </div>
            <div class="contenedor-texto-principal">
              <span class="contenedor">
                <p class="titulo-2 bold">aphanitic</p>
              </span>
            </div>
            <div class="contenedor-autor">
              <div class="contenedor">
                <p class="titulo-2--secundario">By James Maurice Rojo</p>
              </div>
            </div>
            <div class="contenedor-undefined">
              <div class="contenedor">
                <p class="titulo-2">undefined</p>
              </div>
            </div>
          </div>
        </div>
        <div class="elemento-parallax">
          <div class="columna-1">
            <div class="regresar">
              <svg
                fill="#ffffff"
                version="1.1"
                viewBox="144 144 512 512"
                xmlns="http://www.w3.org/2000/svg"
                stroke="#ffffff"
              >
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g
                  id="SVGRepo_tracerCarrier"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    d="m310.1 521.39c2.9531 2.9805 6.9805 4.6562 11.176 4.6562 4.1992 0 8.2227-1.6758 11.18-4.6562 2.9805-2.957 4.6562-6.9805 4.6562-11.18s-1.6758-8.2227-4.6562-11.18l-83.445-83.285h339.91c5.625 0 10.824-3 13.637-7.8711s2.8125-10.875 0-15.746-8.0117-7.8711-13.637-7.8711h-339.91l83.445-83.285c3.9922-3.9922 5.5547-9.8164 4.0898-15.27-1.4609-5.457-5.7227-9.7188-11.176-11.18-5.457-1.4609-11.277 0.097657-15.27 4.0938l-110.21 110.21h-0.003906c-2.9805 2.957-4.6562 6.9805-4.6562 11.18 0 4.1953 1.6758 8.2188 4.6562 11.176z"
                  ></path>
                </g>
              </svg>
              <p>GO BACK</p>
            </div>
            <div data-speed="200" class="background background-3 parallax">
              <div data-speed="20" class="texto parallax">
                <div class="texto-grande">
                  <p>Andesite</p>
                  <p class="bold">aphanitic</p>
                </div>
                <div class="texto-pequeno">
                  <p>A VOLCANIC ROCK OF INTERMEDIATE</p>
                  <p>COMPOSITION, BETWEEN SILICA-POOR</p>
                  <p>BASALT AND SILICA-RICH-RHYOLITE</p>
                </div>
              </div>
            </div>
            <div class="contenedor-escenas-small">
              <div class="background-3 elemento elemento-1"></div>
              <div class="background-3 elemento elemento-2"></div>
              <div class="background-3 elemento elemento-3"></div>
              <div class="background-3 elemento elemento-4"></div>
            </div>
          </div>
          <div class="columna-2">
            <div class="contenedor-texto-principal">
              <span class="contenedor">
                <p class="titulo-2">Andesite</p>
              </span>
            </div>
            <div class="contenedor-texto-principal">
              <span class="contenedor">
                <p class="titulo-2 bold">aphanitic</p>
              </span>
            </div>
            <div class="contenedor-autor">
              <div class="contenedor">
                <p class="titulo-2--secundario">By James Maurice Rojo</p>
              </div>
            </div>
            <div class="contenedor-undefined">
              <div class="contenedor">
                <p class="titulo-2">undefined</p>
              </div>
            </div>
          </div>
        </div>

        <!-- <div class="elemento-parallax">
          <div data-speed="200" class="background background-2 parallax">
            <div data-speed="20" class="texto parallax">
              <div class="texto-grande">
                <p>Batholith</p>
                <p class="bold">plutonic</p>
              </div>
              <div class="texto-pequeno">
                <p>A LARGE MASS OF INTRUSIVE IGNEOUS</p>
                <p>ROCK MADE MOSTLY OF FELSIC OR</p>
                <p>INTERMEDIATE ROCK TYPES.</p>
              </div>
            </div>
          </div>
        </div> -->
      </div>
    </div>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"
      integrity="sha512-16esztaSRplJROstbIIdwX3N97V1+pZvV33ABoG1H2OyTttBxEGkTsoIVsiP1iaTtM8b3+hu2kB6pQ4Clr5yug=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"
      integrity="sha512-Ic9xkERjyZ1xgJ5svx3y0u3xrvfT/uPkV99LBwe68xjy/mGtO+4eURHZBW2xW4SZbFrF1Tf090XqB+EVgXnVjw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.19/bundled/lenis.min.js"></script>
    <script>
      // smooth scroll
      // Bandera animación en curso
      let animacion = false;
      // Match media gsap
      let mm = gsap.matchMedia();

      function esPantallaMovil() {
        return window.innerWidth <= 768; // Puedes ajustar este valor según tus necesidades
      }

      console.log(esPantallaMovil());
      console.log(window.innerWidth);

      // Agregar un event listener a mis elementos .regresar
      const regresar = document.querySelectorAll(".regresar");
      regresar.forEach((elemento) => {
        console.log("hola");
        elemento.addEventListener("click", function animarRegreso() {
          console.log("click");
          tl.reverse();
          setTimeout(() => {
            animacion = false;
          }, tl.totalTime() * 1000);
        });
      });

      gsap.from(".body", {
        opacity: 0,
        duration: 1.3,
        y: -100,
      });

      gsap.registerPlugin(ScrollTrigger);

      let tl = gsap.timeline({
        defaults: {
          ease: "power1.out",
          duration: 1,
          onComplete: () => {
            animacion = false;
          },
        },
      });

      // Poner a todos mis elemento-parallax el listeenr de on click
      const elementos = document.querySelectorAll(".elemento-parallax");
      elementos.forEach((elemento) => {
        elemento.addEventListener("click", () => {
          // Si la animación esta en curso, no hacer nada
          if (animacion) return;
          // Poner la bandera en true
          animacion = true;
          // Obtener el index del elemento
          const index = Array.from(elementos).indexOf(elemento);
          // Mover el scroll a la posicion del index
          window.scrollTo({
            // Ir donde empieza el elemento
            top: index * window.innerHeight,

            behavior: "smooth",
          });

          // Obtener su textogrande y pequeño
          const textoGrande = elemento.querySelector(".texto-grande");
          const textoPequeno = elemento.querySelector(".texto-pequeno");
          const columna1 = elemento.querySelector(".columna-1");
          const columna2 = elemento.querySelector(".columna-2");
          const background = elemento.querySelector(".background");
          const regresar = elemento.querySelector(".regresar");
          // Obtener nextSibling
          const nextSibling = elemento.nextElementSibling;
          // Obtener prevSibling
          const prevSibling = elemento.previousElementSibling;
          const contenedorEscenas = elemento.querySelector(
            ".contenedor-escenas-small"
          );
          // Obtener los textos de .titulo-2
          const elementosTexto = Array.from(
            elemento.querySelectorAll(".titulo-2")
          );

          const titulo2Autor = elemento.querySelector(".titulo-2--secundario");

          const columnaEscenas = elemento.querySelector(".columna-1");
          // Obtener todos los elementos de la clase elemento
          let elementosEscenas = Array.from(contenedorEscenas.children);
          // Obtener los demás elementos hermanos
          const hermanos = Array.from(elemento.parentElement.children);

          // Animar el texto con efecto de salida ventana
          tl = gsap.timeline({
            defaults: { duration: 1, ease: "power2.inOut" },
          });

          if (esPantallaMovil() == false) {
            tl.to(textoGrande, {
              y: 50,
              opacity: 0,
              display: "none",
            })
              .to(
                textoPequeno,
                {
                  y: 50,
                  opacity: 0,
                  display: "none",
                },
                "<"
              )
              .to(
                columna1,
                {
                  width: "60%",
                },
                "+=0.1"
              )
              .to(
                columna2,
                {
                  display: "flex",
                  width: "40%",
                  height: "64%",
                },
                "<"
              )
              .to(
                background,
                {
                  yPercent: 5,
                  backgroundSize: "100% 100%",
                  marginTop: "5%",
                },
                "<"
              )
              .to(
                hermanos.filter((hermano) => hermano !== elemento),
                {
                  opacity: 0,
                },
                "<"
              )
              .to(
                nextSibling,
                {
                  y: 100,
                },
                "<"
              )
              .to(
                prevSibling,
                {
                  y: -100,
                },
                "<"
              )
              .to(
                ".body",
                {
                  // Ocultar la barrar de navegacion
                  overflowY: "hidden",
                },
                "<"
              )
              .to(
                contenedorEscenas,
                {
                  display: "flex",
                  width: "75%",
                  height: "25%",
                  yPercent: 35,
                },
                "<"
              )
              .to(
                elementosEscenas,
                {
                  display: "flex",
                  width: "15%",
                  height: "40%",
                  opacity: 1,
                  stagger: 0.1,
                  // Margen derecho
                  marginRight: "5%",
                },
                "<"
              )
              .to(
                regresar,
                {
                  opacity: 1,
                },
                "<"
              )
              .to(
                elementosTexto,
                {
                  yPercent: 100,
                },
                "-=1.1"
              )
              .to(
                titulo2Autor,
                {
                  yPercent: 1,
                  opacity: 1,
                },
                "<"
              );
          }
          else{
            tl.to(textoGrande, {
              y: 50,
              opacity: 0,
              display: "none",
            })
              .to(
                textoPequeno,
                {
                  y: 50,
                  opacity: 0,
                  display: "none",
                },
                "<"
              )
              .to(
                columna1,
                {
                  width: "20%",
                },
                "+=0.1"
              )
              .to(
                columna2,
                {
                  display: "flex",
                  width: "100%",
                  height: "100%",
                  marginRight: "100px",
                },
                "<"
              )
              .to(
                background,
                {
                  scale: 0, 
                  opacity: 0,
                },
                "<"
              )
              .to(
                hermanos.filter((hermano) => hermano !== elemento),
                {
                  opacity: 0,
                },
                "<"
              )
              .to(
                nextSibling,
                {
                  y: 100,
                },
                "<"
              )
              .to(
                prevSibling,
                {
                  y: -100,
                },
                "<"
              )
              .to(
                ".body",
                {
                  // Ocultar la barrar de navegacion
                  overflowY: "hidden",
                },
                "<"
              )
              .to(
                contenedorEscenas,
                {
                  display: "flex",
                  width: "75%",
                  height: "25%",
                  yPercent: 35,
                },
                "<"
              )
              .to(
                regresar,
                {
                  opacity: 1,
                },
                "<"
              )
              .to(
                elementosTexto,
                {
                  xPercent: -10,
                },
                "-=1.1"
              )
              .to(
                titulo2Autor,
                {
                  yPercent: 1,
                  opacity: 1,
                },
                "<"
              );

          }
        });
      });

      // const navbar = document.querySelector(".navbar");
      // navbar.addEventListener("click", () => {
      //   tl.reverse();
      //   animacion = false;
      // });

      // Modificar velocidad del scroll

      const images = gsap.utils.toArray(".parallax");
      images.forEach((image) => {
        // Revisar si es tambien tiene la clase background
        if (image.classList.contains("background")) {
          gsap.to(image, {
            // Mover el background-image en el eje Y

            backgroundPositionY: -image.dataset.speed + "px",
            scrollTrigger: {
              scrub: 2,
            },
          });
        } else {
          gsap.to(image, {
            yPercent: -image.dataset.speed,
            scrollTrigger: {
              trigger: image,
              scrub: true,
            },
          });
        }
      });

      // const lenis = new Lenis();

      // function raf(time) {
      //   lenis.raf(time);
      //   requestAnimationFrame(raf);
      // }

      // requestAnimationFrame(raf);
    </script>
  </body>
</html>
